# 유저 피드백 게시판 기능 구현

## 작업 정보

- **브랜치**: feature/51
- **시작일**: 2026-01-26
- **상태**: 진행 중

## 목표

유저가 실험체 패치 정보에 대해 피드백을 남길 수 있는 기능 구현

## 요구사항

### 1. 패치 ID 복사 기능

- 패치버전(예: v1.24.0) 클릭 시 패치 ID가 클립보드에 복사
- 복사 완료 피드백 표시

### 2. 실험체 피드백 버튼

- 실험체 상세 페이지 헤더 우측에 피드백 버튼 배치
- 클릭 시 새 창으로 피드백 폼 열림
- 실험체 이름이 기본값으로 설정됨
- 카테고리: 오류 정정, 개선 요청, 건의 사항

### 3. 기타 문의 기능

- UI/UX 피드백
- 원하는 기능 건의
- 기타 문의

### 4. Firebase 저장

- `feedback` 컬렉션에 저장
- 확인 기능은 추후 구현 예정

## 구현 계획

### Phase 1: 타입 정의 및 Firebase 설정

- [ ] 피드백 타입 정의 (`types/feedback.ts`)
- [ ] Firebase Firestore 클라이언트 설정

### Phase 2: 패치 ID 복사 기능

- [ ] PatchCard 컴포넌트에 클릭 시 복사 기능 추가
- [ ] 복사 피드백 UI (토스트 또는 툴팁)

### Phase 3: 피드백 페이지

- [ ] `/feedback` 페이지 생성
- [ ] 피드백 폼 컴포넌트 생성
- [ ] URL 파라미터로 실험체 이름/카테고리 받기

### Phase 4: 실험체 상세 페이지 수정

- [ ] 피드백 버튼 추가 (헤더 우측)
- [ ] 반응형 디자인 적용

### Phase 5: API 엔드포인트

- [ ] 피드백 저장 API 생성

## 기술 결정

### Firebase 컬렉션 구조

```
feedback/
├── {feedbackId}
│   ├── type: 'character' | 'general'
│   ├── category: 'error' | 'improvement' | 'suggestion' | 'ui' | 'feature' | 'other'
│   ├── characterName?: string (실험체 피드백인 경우)
│   ├── patchId?: number (관련 패치가 있는 경우)
│   ├── title: string
│   ├── content: string
│   ├── createdAt: Timestamp
│   ├── status: 'pending' | 'reviewed' | 'resolved'
└── ...
```

## 진행 상황

### 2026-01-26

- [x] 코드베이스 분석
- [x] 타입 정의 생성 (`src/types/feedback.ts`)
- [x] Firebase 클라이언트에 Firestore 추가 (`src/lib/firebase-client.ts`)
- [x] PatchCard에 패치 ID 복사 기능 추가 (`src/components/PatchCard.tsx`)
- [x] 피드백 버튼 컴포넌트 생성 (`src/components/FeedbackButton.tsx`)
- [x] 피드백 페이지 생성 (`src/app/feedback/page.tsx`)
- [x] 실험체 상세 페이지에 피드백 버튼 추가 (`src/app/character/[name]/page.tsx`)
- [x] 홈페이지에 피드백 버튼 추가 (`src/app/page.tsx`)
- [x] 빌드 테스트 통과
- [x] 피드백 상태값 확장 (unread/read/resolved/rejected)
- [x] 관리자 피드백 API 생성 (`/api/admin/feedback`)
- [x] 관리자 피드백 페이지 생성 (`/admin/feedback`)
- [x] AdminHeader에 피드백 메뉴 추가

## 생성/수정된 파일

| 파일                                       | 변경 내용                                |
| ------------------------------------------ | ---------------------------------------- |
| `src/types/feedback.ts`                    | 피드백 타입 정의 + 상태 라벨/색상 (신규) |
| `src/lib/firebase-client.ts`               | Firestore 인스턴스 추가                  |
| `src/components/PatchCard.tsx`             | 패치 버전 클릭 시 ID 복사 기능           |
| `src/components/FeedbackButton.tsx`        | 피드백 버튼 컴포넌트 (신규)              |
| `src/components/admin/AdminHeader.tsx`     | 피드백 메뉴 링크 추가                    |
| `src/app/feedback/page.tsx`                | 피드백 페이지 (신규)                     |
| `src/app/admin/feedback/page.tsx`          | 관리자 피드백 페이지 (신규)              |
| `src/app/api/admin/feedback/route.ts`      | 피드백 목록 조회 API (신규)              |
| `src/app/api/admin/feedback/[id]/route.ts` | 피드백 상태 변경/삭제 API (신규)         |
| `src/app/character/[name]/page.tsx`        | 헤더에 피드백 버튼 추가                  |
| `src/app/page.tsx`                         | 푸터에 피드백 버튼 추가                  |

## 중단 시 이어서 할 작업

(작업 중단 시 여기에 기록)
