# 전체 실험체 패치 데이터 검증

## 개요

- **시작일**: 2026-01-10
- **상태**: 완료
- **관련 브랜치**: feature/36

## 목표

- [x] 85개 전체 실험체에 대해 Firebase 패치 내역과 실제 웹 패치 내역 비교
- [x] 오차가 있는 실험체 목록 작성
- [x] 누락/초과 패치 상세 기록

## 검증 방식

1. Firebase `characters` 컬렉션에서 각 캐릭터의 `patchHistory` 로드
2. Firebase `patchNotes` 컬렉션에서 각 패치 웹페이지 크롤링 (274개)
3. 웹에서 해당 캐릭터가 있는지 확인 (개선된 파싱 로직 사용)
4. 불일치 기록:
   - **누락**: 웹에 있지만 Firebase에 없음
   - **초과**: Firebase에 있지만 웹에 없음 (잘못된 데이터)

## 실행 스크립트

```bash
npx tsx scripts/verify-all-characters.ts
```

## 진행 상황

### 2026-01-10

- 작업 로그 생성
- `verify-all-characters.ts` 스크립트 작성 완료
- 스크립트 실행 완료 (274개 패치 크롤링)
- 결과 분석 및 기록 완료

## 검증 결과 요약

| 항목         | 수치 |
| ------------ | ---- |
| 전체 캐릭터  | 85개 |
| 일치 (정상)  | 38개 |
| 불일치       | 47개 |
| 총 누락 패치 | 69개 |
| 총 초과 패치 | 1개  |

### 패치별 누락 현황

| 패치 ID | 누락 캐릭터 수 | 비고                         |
| ------- | -------------- | ---------------------------- |
| 3055    | 27개           | 가격 조정 패치로 추정        |
| 1931    | 10개           | 가격 조정 패치로 추정        |
| 3098    | 3개            | 일부 숨겨진 누락             |
| 3242    | 2개            | 가격 조정만 (미르카, 히스이) |
| 2592    | 2개            | 버그 수정만 (버니스, 에키온) |
| 2524    | 2개            |                              |
| 1727    | 3개            | 시셀라, 아이작, 테오도르     |
| 1654    | 2개            |                              |
| 기타    | 18개           | 각 1개씩 누락                |

## 불일치 캐릭터 상세 목록

### 누락 (69건)

| 캐릭터     | Firebase | 웹  | 누락 패치 ID     |
| ---------- | -------- | --- | ---------------- |
| 나딘       | 41       | 42  | 3055             |
| 니아       | 12       | 13  | 3055             |
| 니키       | 38       | 39  | 3055             |
| 다니엘     | 33       | 34  | 3055             |
| 다르코     | 22       | 24  | 2765, 1973       |
| 레니       | 22       | 23  | 2331             |
| 르노어     | 25       | 26  | 3055             |
| 리 다이린  | 36       | 38  | 3098, 3055       |
| 리오       | 43       | 44  | 3055             |
| 매그너스   | 35       | 36  | 1931             |
| 미르카     | 3        | 4   | 3242             |
| 바냐       | 27       | 28  | 1812             |
| 버니스     | 41       | 44  | 3055, 2592, 1376 |
| 샬럿       | 20       | 21  | 2114             |
| 쇼이치     | 30       | 31  | 3055             |
| 시셀라     | 30       | 32  | 3055, 1727       |
| 아드리아나 | 37       | 38  | 2220             |
| 아디나     | 25       | 26  | 3055             |
| 아르다     | 34       | 36  | 2102, 1931       |
| 아이솔     | 40       | 41  | 3055             |
| 아이작     | 30       | 33  | 1727, 1654, 1582 |
| 알론소     | 33       | 36  | 3055, 2364, 2237 |
| 얀         | 36       | 39  | 3055, 1931, 1447 |
| 에스텔     | 25       | 26  | 3055             |
| 에이든     | 26       | 28  | 3085, 1931       |
| 에키온     | 36       | 38  | 3055, 2592       |
| 엘레나     | 27       | 29  | 3055, 1931       |
| 요한       | 26       | 28  | 3098, 3055       |
| 윌리엄     | 24       | 25  | 3055             |
| 유민       | 18       | 19  | 3055             |
| 유스티나   | 13       | 14  | 2524             |
| 유키       | 40       | 41  | 3055             |
| 이바       | 25       | 26  | 1931             |
| 이안       | 32       | 33  | 1900             |
| 재키       | 42       | 44  | 3055, 1468       |
| 츠바메     | 36       | 37  | 1931             |
| 카티야     | 33       | 34  | 1931             |
| 캐시       | 31       | 33  | 3055, 1931       |
| 케네스     | 26       | 27  | 3055             |
| 클로에     | 31       | 32  | 2188             |
| 타지아     | 26       | 28  | 1654, 1586       |
| 테오도르   | 32       | 35  | 3149, 1812, 1727 |
| 피오라     | 40       | 41  | 3098             |
| 헤이즈     | 35       | 37  | 3055, 1480       |
| 헨리       | 6        | 7   | 3055             |
| 히스이     | 14       | 16  | 3242, 2524       |

### 초과 (1건)

| 캐릭터 | Firebase | 웹  | 초과 패치 ID | 비고                        |
| ------ | -------- | --- | ------------ | --------------------------- |
| 레온   | 44       | 43  | 1954         | 웹에서 감지 안됨 (확인필요) |

## 분석

### 패치 3055 (27개 캐릭터 누락)

- 가장 많은 누락이 발생한 패치
- 가격 조정 패치일 가능성 높음 (밸런스 변경 없이 캐릭터 언급)
- 웹 확인 필요

### 패치 1931 (10개 캐릭터 누락)

- 두 번째로 많은 누락
- 마찬가지로 가격 조정 패치로 추정

### 이전 숨겨진 누락 작업과의 비교

이전 `2026-01-10-숨겨진누락데이터추가.md` 작업에서 "제외됨"으로 처리한 항목들이 여전히 누락으로 표시됨:

- 3242 (미르카, 히스이) - 가격 조정만
- 3149 (테오도르) - 버그 수정만
- 2592 (버니스, 에키온) - 버그 수정만
- 2364, 2237 (알론소) - 가격 조정만
- 2331 (레니) - 가격 조정만
- 2188 (클로에) - 버그 수정만
- 2102 (아르다) - 가격 조정만
- 1900 (이안) - 변경 없음 (오탐지)
- 1812 (바냐, 테오도르) - 가격 조정만

**결론**: 검증 스크립트는 "웹에서 캐릭터 언급"만 확인하므로, 가격 조정/버그 수정도 누락으로 표시됨. 실제 밸런스 변경이 있는 누락만 추가 필요.

## 결과 파일

- `scripts/verification-results.json` - 상세 결과 JSON

## 중단 시 이어서 할 작업

- [x] 검증 스크립트 작성
- [x] 스크립트 실행
- [x] 결과 분석 및 기록
- [ ] (선택) 실제 밸런스 변경 누락만 필터링하여 추가
