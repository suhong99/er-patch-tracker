# 숨겨진 누락 데이터 추가

## 개요

- **시작일**: 2026-01-10
- **상태**: 진행 중
- **관련 브랜치**: feature/36

## 배경

feature/34 작업에서 `check-missing-patches.ts` 스크립트로 누락 데이터를 찾아 추가했으나, 파싱 로직의 HTML 구조 인식 한계로 인해 일부 캐릭터가 웹에서도 감지되지 않아 "숨겨진 누락"이 발생함.

### 원인

기존 파싱 조건: `spanText === strongText`

```html
<!-- 정상 파싱 -->
<p>
  <span><strong>나딘</strong></span>
</p>

<!-- 누락됨 (설명이 같은 span 안에 있음) -->
<p>
  <span><strong>다니엘</strong><br />Q - 그림자 가위의 피격 타이밍이...</span>
</p>
```

## 목표

- [x] 숨겨진 누락 데이터 목록 확정
- [ ] 각 패치에서 누락된 캐릭터 데이터 크롤링
- [ ] Firebase에 데이터 추가
- [ ] 결과 검증

## 숨겨진 누락 목록 (28개)

| 패치 ID | 버전         | 누락 캐릭터                                                         |
| ------- | ------------ | ------------------------------------------------------------------- |
| 3242    | 9.6          | 미르카, 히스이                                                      |
| 3149    | 9.2c 핫픽스  | 테오도르                                                            |
| 3098    | 9.0a 핫픽스  | 나타폰, 다니엘, 매그너스, 얀, 클로에, 하트, 헤이즈, 혜진, 리 다이린 |
| 2916    | 8.3          | 아이작                                                              |
| 2885    | 8.2          | 레니                                                                |
| 2765    | 1.49         | 다르코                                                              |
| 2592    | 1.43a 핫픽스 | 버니스, 에키온                                                      |
| 2364    | 1.36 Part.2  | 알론소                                                              |
| 2331    | 1.35         | 레니                                                                |
| 2237    | 1.32         | 알론소                                                              |
| 2201    | 1.31         | 바바라                                                              |
| 2188    | 1.30b 핫픽스 | 클로에                                                              |
| 2102    | 1.28         | 아르다                                                              |
| 1942    | 1.22.1       | 루크                                                                |
| 1900    | 1.21         | 이안                                                                |
| 1812    | 1.18         | 바냐, 테오도르                                                      |
| 1727    | 1.15         | 다니엘                                                              |

## 실행 스크립트

```bash
npx tsx scripts/fix-hidden-missing.ts
```

## 진행 상황

### 2026-01-10

- 숨겨진 누락 원인 분석 완료
- `find-hidden-missing.ts` 스크립트로 전체 200개 패치 검사
- 28개 숨겨진 누락 발견
- 수정 스크립트 작성 및 실행 예정

## 실행 결과

### 자동 파싱 성공 (13개) - Firebase 추가 완료

| 패치 ID  | 캐릭터     | 변경사항 | 분류      |
| -------- | ---------- | -------- | --------- |
| 3098     | 나타폰     | 4개      | mixed     |
| 3098     | 다니엘     | 4개      | mixed     |
| 3098     | 매그너스   | 4개      | mixed     |
| 3098     | 얀         | 4개      | mixed     |
| 3098     | 클로에     | 4개      | mixed     |
| 3098     | 하트       | 4개      | mixed     |
| 3098     | 헤이즈     | 4개      | mixed     |
| 3098     | 혜진       | 4개      | mixed     |
| 2916     | 아이작     | 2개      | nerf      |
| 2885     | 레니       | 1개      | buff      |
| 2201     | 바바라     | 2개      | buff      |
| 1942     | 루크       | 1개      | buff      |
| **1727** | **다니엘** | **4개**  | **mixed** |

### 제외된 항목 (15개) - 밸런스 변경 없음

웹 확인 결과, 실제 밸런스 변경이 없는 항목들 (가격 조정/버그 수정만):

| 패치 ID | 캐릭터         | 사유                                   |
| ------- | -------------- | -------------------------------------- |
| 3242    | 미르카, 히스이 | 가격 조정만                            |
| 3149    | 테오도르       | 버그 수정만                            |
| 3098    | 리 다이린      | 쿨다운 계산 로직 설명 (수치 변경 없음) |
| 2765    | 다르코         | 가격 조정 + 버그 수정만                |
| 2592    | 버니스, 에키온 | 버그 수정만                            |
| 2364    | 알론소         | 가격 조정만                            |
| 2331    | 레니           | 가격 조정만                            |
| 2237    | 알론소         | 가격 조정만                            |
| 2188    | 클로에         | 버그 수정만                            |
| 2102    | 아르다         | 가격 조정만                            |
| 1900    | 이안           | 변경 없음 (오탐지)                     |
| 1812    | 바냐, 테오도르 | 가격 조정만                            |

### 검색 로직 개선 필요

`find-hidden-missing.ts` 스크립트가 "가격 조정"이나 "버그 수정" 캐릭터도 감지했음.
향후 실험체 섹션 내 "실험체 밸런스" 부분만 파싱하도록 개선 필요.

## 최종 결과

- **추가된 패치 데이터**: 13개 (12명 캐릭터)
- **제외**: 15개 (밸런스 변경 없음)
- **다니엘 1727 패치**: ✅ 추가 완료

## 중단 시 이어서 할 작업

- [x] `fix-hidden-missing.ts` 스크립트 실행 완료
- [x] Firebase 데이터 추가 확인 완료
- [x] 캐릭터별 stats 재계산 완료
